<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Spool Salad Admin Panel - Configuration System">
    <meta name="theme-color" content="#4CAF50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Spool Admin">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/assets/images/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/images/icon-512x512.png">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --primary-green: #2d5016;
            --accent-gold: #d4af37;
            --light-green: #f0f7e9;
            --text-dark: #2c3e50;
            --border-color: #ddd;
            --success: #27ae60;
            --danger: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--light-green) 0%, #ffffff 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            color: var(--primary-green);
            font-size: 2em;
        }

        .back-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: var(--accent-gold);
            transform: translateY(-2px);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            background: white;
            border: 2px solid var(--border-color);
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .tab:hover {
            border-color: var(--primary-green);
        }

        .tab.active {
            background: var(--primary-green);
            color: white;
            border-color: var(--primary-green);
        }

        /* Card */
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card-title {
            color: var(--primary-green);
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--accent-gold);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        /* Table */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--primary-green);
            color: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        tr:hover {
            background: var(--light-green);
        }

        .price-input {
            width: 100px;
            padding: 8px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            text-align: center;
        }

        .price-input:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--success);
            color: white;
        }

        .btn-primary:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: var(--accent-gold);
            color: white;
        }

        .btn-secondary:hover {
            background: #b8941f;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        .notification.error {
            background: var(--danger);
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* JSON Editor */
        .json-editor {
            width: 100%;
            min-height: 400px;
            font-family: 'Courier New', monospace;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.9em;
        }

        .info-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .info-box strong {
            display: block;
            margin-bottom: 5px;
        }

        /* Category Section */
        .category-section {
            margin-bottom: 30px;
        }

        .category-header {
            background: var(--primary-green);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <div class="header">
            <h1>{{ lang === 'ar' ? '‚öôÔ∏è ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ' : '‚öôÔ∏è Admin Panel' }}</h1>
            <div style="display: flex; gap: 15px; align-items: center;">
                <button class="back-btn" @click="toggleLanguage" style="background: #6c757d; cursor: pointer;">
                    {{ lang === 'ar' ? 'English' : 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' }}
                </button>
                <a href="index.html" class="back-btn">{{ lang === 'ar' ? '‚Üí ÿ±ÿ¨Ÿàÿπ ŸÑŸÑŸÖÿ≠ÿ∑ÿ©' : '‚Üê Back to Terminal' }}</a>
            </div>
        </div>

        <div class="container">
            <!-- Tabs -->
            <div class="tabs">
                <div class="tab" :class="{ active: activeTab === 'shop' }" @click="activeTab = 'shop'">
                    {{ lang === 'ar' ? 'üè™ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑ' : 'üè™ Shop Settings' }}
                </div>
                <div class="tab" :class="{ active: activeTab === 'salads' }" @click="activeTab = 'salads'">
                    {{ lang === 'ar' ? 'ü•ó ÿßŸÑÿ≥ŸÑÿ∑ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©' : 'ü•ó Base Salads' }}
                </div>
                <div class="tab" :class="{ active: activeTab === 'juices' }" @click="activeTab = 'juices'">
                    {{ lang === 'ar' ? 'ü•§ ÿßŸÑÿπÿµÿßÿ¶ÿ±' : 'ü•§ Juices' }}
                </div>
                <div class="tab" :class="{ active: activeTab === 'toppings' }" @click="activeTab = 'toppings'">
                    {{ lang === 'ar' ? 'üçÖ ÿßŸÑÿ•ÿ∂ÿßŸÅÿßÿ™' : 'üçÖ Toppings' }}
                </div>
                <div class="tab" :class="{ active: activeTab === 'json' }" @click="activeTab = 'json'">
                    {{ lang === 'ar' ? 'üìù ŸÖÿ≠ÿ±ÿ± JSON' : 'üìù JSON Editor' }}
                </div>
            </div>

            <!-- Shop Settings Tab -->
            <div v-if="activeTab === 'shop'" class="card">
                <h2 class="card-title">Shop Settings</h2>
                
                <div class="form-group">
                    <label class="form-label">Shop Name (English)</label>
                    <input type="text" class="form-input" v-model="config.shop.name" />
                </div>

                <div class="form-group">
                    <label class="form-label">Shop Name (Arabic)</label>
                    <input type="text" class="form-input" v-model="config.shop.nameAr" dir="rtl" />
                </div>

                <div class="form-group">
                    <label class="form-label">Tagline (English)</label>
                    <input type="text" class="form-input" v-model="config.shop.tagline" />
                </div>

                <div class="form-group">
                    <label class="form-label">Tagline (Arabic)</label>
                    <input type="text" class="form-input" v-model="config.shop.taglineAr" dir="rtl" />
                </div>

                <div class="form-group">
                    <label class="form-label">Logo File Name</label>
                    <input type="text" class="form-input" v-model="config.shop.logo" />
                    <small style="color: #666;">Must be in same folder (e.g., Logo.png)</small>
                </div>


                <div class="form-group">
                    <label class="form-label">Currency</label>
                    <input type="text" class="form-input" v-model="config.shop.currency" />
                </div>

                <div class="form-group">
                    <label class="form-label">Primary Color</label>
                    <input type="color" class="form-input" v-model="config.shop.primaryColor" />
                </div>

                <div class="form-group">
                    <label class="form-label">Accent Color</label>
                    <input type="color" class="form-input" v-model="config.shop.accentColor" />
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" @click="saveConfig">üíæ Save Settings</button>
                </div>
            </div>

            <!-- Base Salads Tab -->
            <div v-if="activeTab === 'salads'" class="card">
                <h2 class="card-title">Base Salads Management</h2>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Item Code</th>
                                <th>English Name</th>
                                <th>Arabic Name</th>
                                <th>Description</th>
                                <th>Image File</th>
                                <th>Price ({{ config.shop.currency }})</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(salad, index) in config.baseSalads" :key="salad.id">
                                <td>
                                    <input 
                                        type="text" 
                                        class="price-input" 
                                        v-model="salad.itemCode" 
                                        maxlength="6"
                                        style="width: 90px;"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="text" 
                                        class="price-input" 
                                        v-model="salad.name" 
                                        style="width: 150px;"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="text" 
                                        class="price-input" 
                                        v-model="salad.nameAr" 
                                        style="width: 150px;"
                                        dir="rtl"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="text" 
                                        class="price-input" 
                                        v-model="salad.description" 
                                        style="width: 200px;"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="text" 
                                        class="price-input" 
                                        v-model="salad.image" 
                                        style="width: 120px;"
                                        placeholder="image.jpg"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number" 
                                        class="price-input" 
                                        v-model.number="salad.price" 
                                        min="0" 
                                        step="0.5"
                                    />
                                </td>
                                <td>
                                    <button 
                                        class="btn" 
                                        @click="removeSalad(index)"
                                        style="background: var(--danger); padding: 5px 10px; font-size: 0.85em;"
                                    >
                                        üóëÔ∏è Delete
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" @click="addNewSalad">‚ûï Add New Salad</button>
                    <button class="btn btn-primary" @click="saveConfig">üíæ Save Changes</button>
                </div>
            </div>

            <!-- Juices Tab -->
            <div v-if="activeTab === 'juices'" class="card">
                <h2 class="card-title">{{ lang === 'ar' ? 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿπÿµÿßÿ¶ÿ±' : 'Manage Juices' }}</h2>
                
                <button class="add-btn" @click="addNewJuice">
                    {{ lang === 'ar' ? '+ ÿ•ÿ∂ÿßŸÅÿ© ÿπÿµŸäÿ± ÿ¨ÿØŸäÿØ' : '+ Add New Juice' }}
                </button>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑŸÖÿπÿ±ŸÅ' : 'ID' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿ±ŸÖÿ≤ ÿßŸÑÿµŸÜŸÅ' : 'Item Code' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑÿßÿ≥ŸÖ' : 'Name' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä' : 'Arabic Name' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑÿ£ÿ≠ÿ¨ÿßŸÖ ŸàÿßŸÑÿ£ÿ≥ÿπÿßÿ±' : 'Sizes & Prices' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑŸàÿµŸÅ' : 'Description' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑŸàÿµŸÅ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä' : 'Arabic Description' }}</th>
                            <th>{{ lang === 'ar' ? 'ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™' : 'Actions' }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(juice, index) in config.juices" :key="juice.id">
                            <td>
                                <input type="text" v-model="juice.id" class="form-input">
                            </td>
                            <td>
                                <input type="text" v-model="juice.itemCode" class="form-input" placeholder="600001">
                            </td>
                            <td>
                                <input type="text" v-model="juice.name" class="form-input">
                            </td>
                            <td>
                                <input type="text" v-model="juice.nameAr" class="form-input">
                            </td>
                            <td>
                                <div v-for="(size, sizeIdx) in juice.sizes" :key="size.id" style="display: flex; gap: 10px; margin-bottom: 8px; align-items: center;">
                                    <input type="text" v-model="size.name" class="form-input" style="flex: 1;" :placeholder="lang === 'ar' ? 'ÿßŸÑÿßÿ≥ŸÖ' : 'Name'">
                                    <input type="text" v-model="size.nameAr" class="form-input" style="flex: 1;" :placeholder="lang === 'ar' ? 'ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä' : 'Arabic Name'">
                                    <input type="number" v-model.number="size.price" class="form-input" style="width: 80px;" :placeholder="lang === 'ar' ? 'ÿßŸÑÿ≥ÿπÿ±' : 'Price'">
                                    <button @click="removeJuiceSize(index, sizeIdx)" class="delete-btn" style="padding: 5px 10px;">√ó</button>
                                </div>
                                <button @click="addJuiceSize(index)" class="add-btn" style="padding: 5px 15px; font-size: 0.9em;">
                                    {{ lang === 'ar' ? '+ ÿ≠ÿ¨ŸÖ ÿ¨ÿØŸäÿØ' : '+ Add Size' }}
                                </button>
                            </td>
                            <td>
                                <input type="text" v-model="juice.description" class="form-input">
                            </td>
                            <td>
                                <input type="text" v-model="juice.descriptionAr" class="form-input">
                            </td>
                            <td>
                                <button @click="removeJuice(index)" class="delete-btn">
                                    {{ lang === 'ar' ? 'ÿ≠ÿ∞ŸÅ' : 'Delete' }}
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Toppings Tab -->
            <div v-if="activeTab === 'toppings'" class="card">
                <h2 class="card-title">Toppings Management</h2>
                
                <div v-for="(category, catIndex) in config.toppings" :key="category.category" class="category-section">
                    <div class="category-header">
                        {{ category.category }} | {{ category.categoryAr }}
                    </div>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>English Name</th>
                                    <th>Arabic Name</th>
                                    <th>Emoji</th>
                                    <th>Image File</th>
                                    <th>Price per Scoop ({{ config.shop.currency }})</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(item, itemIndex) in category.items" :key="item.id">
                                    <td>
                                        <input 
                                            type="text" 
                                            class="price-input" 
                                            v-model="item.name" 
                                            style="width: 150px;"
                                        />
                                    </td>
                                    <td>
                                        <input 
                                            type="text" 
                                            class="price-input" 
                                            v-model="item.nameAr" 
                                            style="width: 150px;"
                                            dir="rtl"
                                        />
                                    </td>
                                    <td>
                                        <input 
                                            type="text" 
                                            class="price-input" 
                                            v-model="item.emoji" 
                                            style="width: 60px;"
                                            maxlength="2"
                                        />
                                    </td>
                                    <td>
                                        <input 
                                            type="text" 
                                            class="price-input" 
                                            v-model="item.image" 
                                            style="width: 120px;"
                                            placeholder="image.jpg"
                                        />
                                    </td>
                                    <td>
                                        <input 
                                            type="number" 
                                            class="price-input" 
                                            v-model.number="item.price" 
                                            min="0" 
                                            step="0.5"
                                        />
                                    </td>
                                    <td>
                                        <button 
                                            class="btn" 
                                            @click="removeTopping(catIndex, itemIndex)"
                                            style="background: var(--danger); padding: 5px 10px; font-size: 0.85em;"
                                        >
                                            üóëÔ∏è Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 10px;">
                        <button 
                            class="btn btn-secondary" 
                            @click="addNewTopping(catIndex)"
                            style="font-size: 0.9em;"
                        >
                            ‚ûï Add Topping to {{ category.category }}
                        </button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" @click="saveConfig">üíæ Save Changes</button>
                </div>
            </div>

            <!-- JSON Editor Tab -->
            <div v-if="activeTab === 'json'" class="card">
                <h2 class="card-title">Advanced JSON Editor</h2>
                
                <div class="info-box">
                    <strong>‚ö†Ô∏è Advanced Users Only</strong>
                    Edit the raw JSON configuration. Make sure to maintain valid JSON syntax.
                </div>

                <textarea 
                    class="json-editor" 
                    v-model="jsonText"
                    spellcheck="false"
                ></textarea>

                <div class="action-buttons">
                    <button class="btn btn-primary" @click="saveFromJson">üíæ Save JSON</button>
                    <button class="btn btn-secondary" @click="formatJson">‚ú® Format JSON</button>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div v-if="notification" class="notification" :class="{ error: notificationError }">
            {{ notification }}
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    lang: 'ar',
                    config: {
                        "shop": {
                            "name": "Spool",
                            "nameAr": "ÿ≥ÿ®ŸàŸÑ",
                            "tagline": "For all that the fields produce",
                            "taglineAr": "ŸÑŸÉŸÑ ŸÖÿß ÿ™ŸÜÿ™ÿ¨Ÿá ÿßŸÑÿ≠ŸÇŸàŸÑ",
                            "logo": "logo transparent.png",
                            "currency": "SAR",
                            "primaryColor": "#2d5016",
                            "accentColor": "#d4af37"
                        },
                        "baseSalads": [
                            {"id": "quinoa-tabbouleh", "itemCode": "500001", "name": "Quinoa Tabbouleh Salad", "nameAr": "ÿ≥ŸÑÿ∑ÿ© ŸÉŸäŸÜŸàÿß ÿ™ÿ®ŸàŸÑÿ©", "price": 19, "description": "Quinoa with traditional tabbouleh flavors", "descriptionAr": "ŸÉŸäŸÜŸàÿß ŸÖÿπ ŸÜŸÉŸáÿßÿ™ ÿßŸÑÿ™ÿ®ŸàŸÑÿ© ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©"},
                            {"id": "date-salad", "itemCode": "500002", "name": "Date Salad", "nameAr": "ÿ≥ŸÑÿ∑ÿ© ÿßŸÑÿ™ŸÖÿ±", "price": 19, "description": "Fresh salad with dates", "descriptionAr": "ÿ≥ŸÑÿ∑ÿ© ÿ∑ÿßÿ≤ÿ¨ÿ© ŸÖÿπ ÿßŸÑÿ™ŸÖÿ±"},
                            {"id": "fusilli-broccoli", "itemCode": "500003", "name": "Fusilli Broccoli Salad", "nameAr": "ÿ≥ŸÑÿ∑ÿ© ŸÅŸäŸàÿ≤ŸÑŸä ÿ®ÿ±ŸàŸÉŸÑŸä", "price": 20, "description": "Fusilli pasta with fresh broccoli", "descriptionAr": "ŸÖÿπŸÉÿ±ŸàŸÜÿ© ŸÅŸäŸàÿ≤ŸÑŸä ŸÖÿπ ÿ®ÿ±ŸàŸÉŸÑŸä ÿ∑ÿßÿ≤ÿ¨"},
                            {"id": "tuna-salad", "itemCode": "500004", "name": "Tuna Salad", "nameAr": "ÿ≥ŸÑÿ∑ÿ© ÿ™ŸàŸÜÿ©", "price": 19, "description": "Fresh tuna salad", "descriptionAr": "ÿ≥ŸÑÿ∑ÿ© ÿ™ŸàŸÜÿ© ÿ∑ÿßÿ≤ÿ¨ÿ©"},
                            {"id": "custom", "itemCode": "500005", "name": "Build Your Own", "nameAr": "ÿ≥ŸÑÿ∑ÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ∑ŸÑÿ®", "price": 13, "description": "Create your own custom salad", "descriptionAr": "ÿ£ŸÜÿ¥ÿ¶ ÿ≥ŸÑÿ∑ÿ™ŸÉ ÿßŸÑÿÆÿßÿµÿ©"},
                            {"id": "caesar", "itemCode": "500006", "name": "Caesar Salad", "nameAr": "ÿ≥ŸÑÿ∑ÿ© ÿßŸÑÿ≥Ÿäÿ≤ÿ±", "price": 19, "description": "Classic Caesar with romaine and parmesan", "descriptionAr": "ÿ≥Ÿäÿ≤ÿ± ŸÉŸÑÿßÿ≥ŸäŸÉŸäÿ© ŸÖÿπ ÿÆÿ≥ ÿ±ŸàŸÖÿßŸÜŸä Ÿàÿ®ÿßÿ±ŸÖŸäÿ≤ÿßŸÜ"}
                        ],
                        "juices": [
                            {
                                "id": "fresh-juice",
                                "itemCode": "600001",
                                "name": "Fresh Juice",
                                "nameAr": "ÿπÿµŸäÿ± ÿ∑ÿßÿ≤ÿ¨",
                                "sizes": [
                                    {"id": "medium", "name": "Medium", "nameAr": "Ÿàÿ≥ÿ∑", "price": 10},
                                    {"id": "large", "name": "Large", "nameAr": "ŸÉÿ®Ÿäÿ±", "price": 13}
                                ],
                                "description": "Fresh and healthy juice",
                                "descriptionAr": "ÿπÿµŸäÿ± ÿ∑ÿßÿ≤ÿ¨ Ÿàÿµÿ≠Ÿä"
                            }
                        ],
                        "toppings": [
                            {
                                "category": "Sauces",
                                "categoryAr": "ÿßŸÑÿµŸàÿµÿßÿ™",
                                "items": [
                                    {"id": "dill-sauce", "name": "Dill Sauce", "nameAr": "ÿµŸàÿµ ÿ¥ÿ®ÿ™", "emoji": "ü•í", "image": "dill.jpg", "price": 3},
                                    {"id": "kale-sauce", "name": "Kale Sauce", "nameAr": "ÿµŸàÿµ ÿßŸÑŸÉŸäŸÑ", "emoji": "ü•¨", "image": "kale.jpg", "price": 5},
                                    {"id": "caesar-sauce", "name": "Caesar Sauce", "nameAr": "ÿµŸàÿµ ÿßŸÑÿ≥Ÿäÿ≤ÿ±", "emoji": "ü•ó", "image": "caesar.jpg", "price": 4},
                                    {"id": "pesto-sauce", "name": "Pesto Sauce", "nameAr": "ÿµŸàÿµ ÿßŸÑÿ®ÿ≥Ÿäÿ™Ÿà", "emoji": "üåø", "image": "pesto.jpg", "price": 7},
                                    {"id": "vinaigrette-sauce", "name": "Vinaigrette Sauce", "nameAr": "ÿµŸàÿµ ŸÅŸäŸÜÿßÿ¨ÿ±Ÿäÿ™", "emoji": "üç∂", "image": "vinaigrette.jpg", "price": 5}
                                ]
                            },
                            {
                                "category": "Vegetables",
                                "categoryAr": "ÿßŸÑÿÆÿ∂ÿ±Ÿàÿßÿ™",
                                "items": [
                                    {"id": "broccoli", "name": "Broccoli", "nameAr": "ÿ®ÿ±ŸàŸÉŸÑŸä", "emoji": "ü•¶", "image": "broccoli.jpg", "price": 1},
                                    {"id": "bell-peppers", "name": "Bell Peppers", "nameAr": "ŸÅŸÑŸÅŸÑ ÿßŸÑŸàÿßŸÜ", "emoji": "ü´ë", "image": "peppers.jpg", "price": 1},
                                    {"id": "corn", "name": "Corn", "nameAr": "ÿ∞ÿ±ÿ©", "emoji": "üåΩ", "image": "corn.jpg", "price": 1},
                                    {"id": "beets", "name": "Beets", "nameAr": "ÿ¥ŸÖŸÜÿØÿ±", "emoji": "ü•ï", "image": "beets.jpg", "price": 1},
                                    {"id": "cherry-tomatoes", "name": "Cherry Tomatoes", "nameAr": "ÿ∑ŸÖÿßÿ∑ŸÖ ŸÖÿ¥Ÿäÿ±Ÿä", "emoji": "üçÖ", "image": "tomatoes.jpg", "price": 1}
                                ]
                            },
                            {
                                "category": "Cheese",
                                "categoryAr": "ÿßŸÑÿ£ÿ¨ÿ®ÿßŸÜ",
                                "items": [
                                    {"id": "feta-cheese", "name": "Feta Cheese", "nameAr": "ÿ¨ÿ®ŸÜÿ© ŸÅŸäÿ™ÿß", "emoji": "üßÄ", "image": "feta.jpg", "price": 1},
                                    {"id": "parmesan-cheese", "name": "Parmesan Cheese", "nameAr": "ÿ¨ÿ®ŸÜÿ© ÿ®Ÿäÿ±ŸÖÿ≤ÿßŸÜ", "emoji": "üßÄ", "image": "parmesan.jpg", "price": 1}
                                ]
                            },
                            {
                                "category": "Fruits",
                                "categoryAr": "ÿßŸÑŸÅŸàÿßŸÉŸá",
                                "items": [
                                    {"id": "strawberries", "name": "Strawberries", "nameAr": "ŸÅÿ±ÿßŸàŸÑÿ©", "emoji": "üçì", "image": "strawberries.jpg", "price": 1},
                                    {"id": "pomegranate", "name": "Pomegranate", "nameAr": "ÿ±ŸÖÿßŸÜ", "emoji": "üçá", "image": "pomegranate.jpg", "price": 1}
                                ]
                            },
                            {
                                "category": "Add-ons",
                                "categoryAr": "ÿ•ÿ∂ÿßŸÅÿßÿ™",
                                "items": [
                                    {"id": "extra-protein", "name": "Extra Protein", "nameAr": "ÿ•ÿ∂ÿßŸÅÿ© ÿ®ÿ±Ÿàÿ™ŸäŸÜ", "emoji": "ü•©", "image": "protein.jpg", "price": 7}
                                ]
                            }
                        ]
                    },
                    activeTab: 'shop',
                    jsonText: '',
                    notification: null,
                    notificationError: false
                };
            },
            methods: {
                toggleLanguage() {
                    this.lang = this.lang === 'ar' ? 'en' : 'ar';
                    document.documentElement.lang = this.lang;
                    document.documentElement.dir = this.lang === 'ar' ? 'rtl' : 'ltr';
                },
                saveConfig() {
                    // In a real application, this would save to the server
                    // For now, we'll update localStorage and show instructions
                    this.jsonText = JSON.stringify(this.config, null, 2);
                    localStorage.setItem('saladConfig', this.jsonText);
                    
                    this.downloadConfig();
                    this.showNotification('Changes saved! Download the config.json file and replace the original.');
                },
                saveFromJson() {
                    try {
                        const parsed = JSON.parse(this.jsonText);
                        this.config = parsed;
                        localStorage.setItem('saladConfig', this.jsonText);
                        
                        this.downloadConfig();
                        this.showNotification('JSON saved successfully!');
                    } catch (error) {
                        this.showNotification('Invalid JSON format: ' + error.message, true);
                    }
                },
                formatJson() {
                    try {
                        const parsed = JSON.parse(this.jsonText);
                        this.jsonText = JSON.stringify(parsed, null, 2);
                        this.showNotification('JSON formatted successfully!');
                    } catch (error) {
                        this.showNotification('Invalid JSON format: ' + error.message, true);
                    }
                },
                downloadConfig() {
                    const blob = new Blob([this.jsonText], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'config.json';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                },
                showNotification(message, isError = false) {
                    this.notification = message;
                    this.notificationError = isError;
                    setTimeout(() => {
                        this.notification = null;
                        this.notificationError = false;
                    }, 5000);
                },
                addNewSalad() {
                    const newId = this.config.baseSalads.length > 0 
                        ? Math.max(...this.config.baseSalads.map(s => s.id)) + 1 
                        : 1;
                    
                    const newSalad = {
                        id: newId,
                        name: "New Salad",
                        nameAr: "ÿ≥ŸÑÿ∑ÿ© ÿ¨ÿØŸäÿØÿ©",
                        description: "Fresh and delicious",
                        image: "salad.jpg",
                        itemCode: "000000",
                        price: 0
                    };
                    
                    this.config.baseSalads.push(newSalad);
                    this.showNotification('New salad added! Fill in the details and save.');
                },
                removeSalad(index) {
                    if (confirm('Are you sure you want to delete this salad?')) {
                        const salad = this.config.baseSalads[index];
                        this.config.baseSalads.splice(index, 1);
                        this.showNotification(`Deleted: ${salad.name}`);
                    }
                },
                addNewTopping(categoryIndex) {
                    const category = this.config.toppings[categoryIndex];
                    const newId = category.items.length > 0 
                        ? Math.max(...category.items.map(t => t.id)) + 1 
                        : 1;
                    
                    const newTopping = {
                        id: newId,
                        name: "New Topping",
                        nameAr: "ÿ•ÿ∂ÿßŸÅÿ© ÿ¨ÿØŸäÿØÿ©",
                        emoji: "ü•ó",
                        image: "topping.jpg",
                        price: 0
                    };
                    
                    category.items.push(newTopping);
                    this.showNotification(`New topping added to ${category.category}!`);
                },
                removeTopping(categoryIndex, itemIndex) {
                    const category = this.config.toppings[categoryIndex];
                    const item = category.items[itemIndex];
                    
                    if (confirm(`Are you sure you want to delete ${item.name}?`)) {
                        category.items.splice(itemIndex, 1);
                        this.showNotification(`Deleted: ${item.name}`);
                    }
                },
                addNewJuice() {
                    const newJuice = {
                        id: "juice-" + Date.now(),
                        itemCode: "600002",
                        name: "New Juice",
                        nameAr: "ÿπÿµŸäÿ± ÿ¨ÿØŸäÿØ",
                        sizes: [
                            {id: "medium", name: "Medium", nameAr: "Ÿàÿ≥ÿ∑", price: 10},
                            {id: "large", name: "Large", nameAr: "ŸÉÿ®Ÿäÿ±", price: 13}
                        ],
                        description: "Fresh juice",
                        descriptionAr: "ÿπÿµŸäÿ± ÿ∑ÿßÿ≤ÿ¨"
                    };
                    this.config.juices.push(newJuice);
                    this.showNotification('New juice added!');
                },
                removeJuice(index) {
                    const juice = this.config.juices[index];
                    if (confirm(`Are you sure you want to delete ${juice.name}?`)) {
                        this.config.juices.splice(index, 1);
                        this.showNotification(`Deleted: ${juice.name}`);
                    }
                },
                addJuiceSize(juiceIndex) {
                    const juice = this.config.juices[juiceIndex];
                    const newSize = {
                        id: "size-" + Date.now(),
                        name: "New Size",
                        nameAr: "ÿ≠ÿ¨ŸÖ ÿ¨ÿØŸäÿØ",
                        price: 10
                    };
                    juice.sizes.push(newSize);
                    this.showNotification('New size added!');
                },
                removeJuiceSize(juiceIndex, sizeIndex) {
                    const juice = this.config.juices[juiceIndex];
                    if (juice.sizes.length > 1) {
                        juice.sizes.splice(sizeIndex, 1);
                        this.showNotification('Size removed!');
                    } else {
                        alert('Cannot remove the last size!');
                    }
                }
            },
            watch: {
                activeTab(newTab) {
                    if (newTab === 'json') {
                        this.jsonText = JSON.stringify(this.config, null, 2);
                    }
                }
            },
            mounted() {
                // Config is now embedded in data()
                this.jsonText = JSON.stringify(this.config, null, 2);
            }
        }).mount('#app');
    </script>
    
    <!-- PWA Registration -->
    <script src="/pwa-register.js"></script>
</body>
</html>
